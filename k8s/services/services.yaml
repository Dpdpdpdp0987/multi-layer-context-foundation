---
apiVersion: v1
kind: Service
metadata:
  name: mlcf-api
  namespace: mlcf
  labels:
    app: mlcf-api
    component: api
spec:
  type: ClusterIP
  ports:
  - port: 80
    targetPort: http
    protocol: TCP
    name: http
  selector:
    app: mlcf-api
  sessionAffinity: None

---
apiVersion: v1
kind: Service
metadata:
  name: qdrant-service
  namespace: mlcf
  labels:
    app: qdrant
    component: vector-db
spec:
  type: ClusterIP
  ports:
  - port: 6333
    targetPort: http
    protocol: TCP
    name: http
  - port: 6334
    targetPort: grpc
    protocol: TCP
    name: grpc
  selector:
    app: qdrant

---
apiVersion: v1
kind: Service
metadata:
  name: qdrant-headless
  namespace: mlcf
  labels:
    app: qdrant
spec:
  type: ClusterIP
  clusterIP: None
  ports:
  - port: 6333
    name: http
  - port: 6334
    name: grpc
  selector:
    app: qdrant

---
apiVersion: v1
kind: Service
metadata:
  name: neo4j-service
  namespace: mlcf
  labels:
    app: neo4j
    component: graph-db
spec:
  type: ClusterIP
  ports:
  - port: 7474
    targetPort: http
    protocol: TCP
    name: http
  - port: 7687
    targetPort: bolt
    protocol: TCP
    name: bolt
  - port: 2004
    targetPort: metrics
    protocol: TCP
    name: metrics
  selector:
    app: neo4j

---
apiVersion: v1
kind: Service
metadata:
  name: neo4j-headless
  namespace: mlcf
  labels:
    app: neo4j
spec:
  type: ClusterIP
  clusterIP: None
  publishNotReadyAddresses: true
  ports:
  - port: 7474
    name: http
  - port: 7687
    name: bolt
  - port: 5000
    name: discovery
  selector:
    app: neo4j